<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Many Points</title>

	<script src="../js/d3/d3.min.js"></script>
	<script src="../js/util.js"></script>

	<style>
		
	</style>
</head>
<body>
	<div id="container">
	</div>
	<script>
		width = 960;
		height = 600;
		var div = d3.select("#container");
		var svg = div.append("svg")
				.attr("width", width)
				.attr("height", height)
		
		// cartesian_g = svg.append("g")
		// 		.attr("tranform", "translate(20,20)");

		// parallel_g = svg.append("g")
		// 		.attr("tranform", "translate(500,20)");		

		cxmin = -10;
		cxmax = 10;
		cymin = -20;
		cymax = 20;

		pxmin = -10;
		pxmax = 10;
		pymin = -20;
		pymax = 20;

		var cartesian_x = d3.scaleLinear()
				.domain([cxmin, cxmax])
				.range([50, width*0.60]); 
		var cartesian_y = d3.scaleLinear()
				.domain([cymin, cymax])
				.range([height-50, 50]);

		
		var p_x = d3.scaleLinear()
				.domain([pxmin, pxmax])
				.range([50,height-50]);
		var p_y = d3.scaleLinear()
				.domain([pymin, pymax])
				.range([50,height-50]);

		var all_p = d3.scaleBand()
				.domain([0,1])
				.rangeRound([width*0.75, width-50]);


		var origin = [0,0];

		var points = [origin];
		
		function f(x){
			return Math.tan(x);
		}

		var x = seqLen(-3*Math.PI,3*Math.PI, 100);
		// for (var i=-5; i<=5; i++){
		// 	x.push(i);
		// }

		var points = [];
		for (var i=0; i<x.length; i++){
			var y = f(x[i]);
			if (y != Infinity && y != -Infinity) points.push([x[i], y]);
		}

		svg.append("line").attr("class", "cartesian-x-axis")
				.attr("x1", cartesian_x(cxmin))
				.attr("y1", cartesian_y(0))
				.attr("x2", cartesian_x(cxmax))
				.attr("y2", cartesian_y(0))
				.attr("stroke", "#999");

		svg.append("line").attr("class", "cartesian-y-axis")
				.attr("x1", cartesian_x(0))
				.attr("y1", cartesian_y(cymin))
				.attr("x2", cartesian_x(0))
				.attr("y2", cartesian_y(cymax))
				.attr("stroke", "#999");

		svg.append("line").attr("class", "parallel-x-axis")
				.attr("x1", all_p(0))
				.attr("y1", p_x(pxmin))
				.attr("x2", all_p(0))
				.attr("y2", p_x(pxmax))
				.attr("stroke", "#999");

		svg.append("line").attr("class", "parallel-y-axis")
				.attr("x1", all_p(1))
				.attr("y1", p_y(pymin))
				.attr("x2", all_p(1))
				.attr("y2", p_y(pymax))
				.attr("stroke", "#999");


		svg.selectAll(".cartesian-points").data(points)
			.enter().append("circle")
				.attr("cx", (d,i) => {return cartesian_x(d[0]);})
				.attr("cy", (d,i) => {return cartesian_y(d[1]);})
				.attr("r", 2)
				.attr("fill", "#0099ff")

		pxp = points.map((m) => {return m[0];});
		svg.selectAll(".parallel-x-points").data(pxp)
			.enter().append("circle")
				.attr("cx", (d,i) => {return all_p(0);})
				.attr("cy", (d,i) => {return p_x(d);})
				.attr("r", 2)
				.attr("fill", "#ff0099")

		pyp = points.map((m) => {return m[1];});
		svg.selectAll(".parallel-x-points").data(pyp)
			.enter().append("circle")
				.attr("cx", (d,i) => {return all_p(1);})
				.attr("cy", (d,i) => {return p_y(d);})
				.attr("r", 2)
				.attr("fill", "#ff0099")

		svg.selectAll(".parallel-lines").data(points)
			.enter().append("line")
				.attr("x1", all_p(0))
				.attr("y1", (d,i) => {return p_x(d[0]);})
				.attr("x2", all_p(1))
				.attr("y2", (d,i) => {return p_y(d[1]);})
				.style("stroke-width", 0.5)
				.style("stroke", "#ff0099")

	</script>
</body>
</html>